{"version":3,"sources":["src/app.js","src/channel.js","src/control-panel.js","src/environment.js","src/helpers.js","src/main.js","src/media-library.js","src/timer.js","src/resources/index.js","src/resources/value-converters/int-to-rgb.js","src/resources/value-converters/int-to-str.js"],"names":["App","xhr","XMLHttpRequest","open","onreadystatechange","status","data","readyState","config","JSON","parse","responseText","console","log","init","alert","send","showChannels","showPlaylist","showLibrary","selectedChannel","channels","forEach","c","push","window","app","tickTack","setInterval","i","channel","tick","showMediaLibrary","ws","browseLibrary","Channel","params","name","wsURL","isPlaying","isPaused","isStopped","connected","libraryURI","tracklist","currentTrack","timePosition","seeking","volume","connect","webSocketUrl","callingConvention","on","onEvent","bind","e","event","tl_track","track","changeState","playback","getState","then","s","time_position","updateTracklist","getVolume","d","getTracks","Array","isArray","tracks","getCurrentTrack","mixer","setVolume","getCurrentTrackLength","length","readTimePosition","v","getTimePosition","updateSeek","seek","parseInt","getTimePositioin","state","pause","resume","onClose","cb","o","uri","library","browse","ControlPanel","volumeStep","helpers","increaseVolume","nv","decreaseVolume","resize","debug","testing","Helpers","formatTime","time","m","Math","floor","fs","formatTrack","str","configure","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","MediaLibrary","message","Timer","IntToRGBValueConverter","toView","int","r","g","fromView","IntToStrValueConverter","String"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Channel} from 'channel'\nimport {MediaLibrary} from 'media-library'\nimport {ControlPanel} from 'control-panel'\n\nexport class App {\n  constructor() {\n\n    //loadConfigFile first\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('get', './src/config.json', true);\n\n    xhr.onreadystatechange = () => {\n\t\t  var status;\n\t\t  var data;\n\t\t\n      if (xhr.readyState == 4) { // `DONE`\n\t\t\t  if (xhr.status == 200) {\n\t\t\t\t  this.config = JSON.parse(xhr.responseText);\n          console.log('config');\n          this.init()\n\t\t\t  } else {\n          console.log(xhr);\n          alert('no config file');\n\t\t\t  }\n\t\t  }\n\t  };\n\n    xhr.send();\n    \n  }\n\n  init() {\n    this.showChannels = true;\n    this.showPlaylist = false;\n    this.showLibrary = false;\n    this.selectedChannel = 0;\n\n    this.channels = [];\n    this.config['channels'].forEach((c) => {\n      this.channels.push(new Channel(c));\n    });\n    window.app = this;\n\n    //TODO: Are there some better ways how to handle this? Events maybe?\n    this.tickTack = window.setInterval((i) => {\n      this.channels.forEach((channel) => {\n        channel.tick();\n      });\n    },1000);\n\n  }\n\n  showMediaLibrary(i) {\n\n    console.log(i);\n    this.showChannels = false;\n    this.showPlaylist = false;\n    this.showLibrary = true;\n\n    console.log(this.channels[0]);\n    window.c = this.channels[0].ws;\n    this.channels[0].browseLibrary(console.log);\n  }\n}\n","import Mopidy from 'mopidy'\n\nexport class Channel {\n  constructor(params) {\n    this.name = params.name\n    this.wsURL = params.wsURL;\n    this.ws = null;\n    \n    this.isPlaying = false;\n    this.isPaused = false;\n    this.isStopped = false;\n\n    this.connected = false;\n\n    this.libraryURI = null;\n    this.tracklist = [];\n    this.currentTrack = null;\n    this.timePosition = 0;\n    this.seeking = false;\n    this.volume = 0;\n    \n    this.connect();\n  }\n\n  connect() {\n    try {\n      this.ws = new Mopidy({\n        webSocketUrl : 'ws://' + this.wsURL,\n        callingConvention : 'by-position-or-by-name'\n      });\n      this.ws.on(this.onEvent.bind(this));\n      //TODO: Find the access to ws or fix it in mopidy way\n      //this.ws.websocket.onclose = this.onClose;\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  onEvent(event,data) {\n    switch(event) {\n      case 'state:online':\n        this.connected = true;\n        this.init();\n        break;\n      case 'event:trackPlaybackStarted':\n        this.currentTrack = data.tl_track.track;\n        this.changeState('playing');\n        break;\n      case 'event:trackPlaybackResumed':\n        this.changeState('playing');\n        break;\n      case 'event:trackPlaybackPaused':\n        this.changeState('paused');\n        break;\n      case 'event:tracklistChanged':\n        //TODO : Update tracklist\n        break;\n      case 'event:volumeChanged':\n        this.volume=data.volume;\n        break;\n      case 'event:playbackStateChanged':\n        this.ws.playback.getState().then((s) => {\n          this.changeState(s);\n        });\n        break;\n      case 'state:offline':\n        this.connected = false;\n        this.changeState('disconnect');\n        break;\n      case 'event:seeked':\n        console.log('seeked');\n        this.timePosition = data.time_position;\n      default:\n        console.log(event);\n    }\n  }\n\n  init() {\n    this.updateTracklist();\n    this.getVolume();\n    this.ws.playback.getState().then((d) => {\n      this.changeState(d);\n    });\n\n  }\n\n  updateTracklist() {\n    this.ws.tracklist.getTracks().then((d) => {\n      if (Array.isArray(d)) {\n        this.tracks = d;\n      } else {\n        this.tracks = [];\n      }\n    });\n  }\n\n  //Check if this is really needed\n  getCurrentTrack() {\n    console.log('track updating');\n    this.ws.playback.getCurrentTrack({}).then((d) => {\n      this.currentTrack = d;\n    })\n  }\n\n  getVolume() {\n    this.ws.mixer.getVolume({}).then((d) => {\n      console.log('volume from server: ');\n      console.log(d);\n      this.volume = d;\n    });\n  }\n\n  setVolume() {\n    this.ws.mixer.setVolume({volume : this.volume}).then((d) => {\n      if (d === false) {\n        //FIXME: There should be a way how to notify user that command was actually rejected\n      }\n    });\n  }\n\n  getCurrentTrackLength() {\n    if (this.currentTrack != null) {\n      return this.currentTrack.length;\n    } else {\n      return 0;\n    }\n  }\n\n  //Giving aurelia direct acess to the var ends by getting and string instead of integer\n  readTimePosition(v) {\n    return this.timePosition;\n  }\n\n  getTimePosition() {\n    console.log('Updating time position');\n    this.ws.playback.getTimePosition().then((d) => {\n      console.log(d);\n      this.timePosition = d;\n    });\n  }\n\n  updateSeek(v) {\n    this.seeking = true;\n    console.log('seeking to: ' + this.timePosition);\n    console.log('maxValue: ' + this.getCurrentTrackLength());\n    this.ws.playback.seek({time_position: parseInt(this.timePosition)}).then((d) => {\n      this.seeking = false\n      if (d == false) {\n        //FIXME: Show error should be show to user\n        this.ws.playback.getTimePositioin((d) => {\n          this.timePosition = d;\n        });\n      }\n    })\n  }\n\n  changeState(state) {\n    this.isPlaying = false;\n    this.isPaused = false;\n    this.isStopped = false;\n    switch(state) {\n      case 'paused':\n        this.isPaused = true;\n        this.getCurrentTrack();\n        this.getTimePosition();\n        break;\n      case 'playing':\n        this.isPlaying = true;\n        this.getCurrentTrack();\n        this.getTimePosition();\n        break;\n      case 'stopped':\n        this.isStopped=true;\n        break;\n      default:\n        console.log('WARNING: Unknown state ' + state);\n    }\n  }\n\n  pause() {\n    this.ws.playback.pause({}).then((d) => {\n    });;\n  }\n\n  resume() {\n    this.ws.playback.resume({}).then((d) => {});\n  }\n\n  onClose() {\n    this.connected = false;\n  }\n\n  browseLibrary(cb) {\n    var o = {uri : null}\n    this.ws.library.browse(o).then(cb);\n  }\n\n  tick() {\n    //FIXME: It would be nice to teach Aurelia to use \n    console.log('tick');\n    if(this.isPlaying && !this.seeking) this.timePosition = parseInt(this.timePosition) + 1000;\n  }\n}\n","import {bindable} from 'aurelia-framework';\nimport {Helpers} from './helpers';\n\nexport class ControlPanel {\n  @bindable channel;\n  constructor() {\n    this.volumeStep = 5;\n    this.helpers = Helpers;\n  }\n\n  increaseVolume() {\n    console.log(this.channel.volume);\n    console.log(this.volumeStep);\n    console.log(typeof this.channel.volume);\n    var nv = this.channel.volume + this.volumeStep;\n\n    console.log('nv -> ' + nv);\n    if (nv > 100) nv=100;\n\n    this.channel.volume=nv;\n    this.channel.setVolume();\n  }\n\n  decreaseVolume() {\n    var nv = this.channel.volume - this.volumeStep;\n\n    if (nv < 0) nv = 0;\n    \n    this.channel.volume=nv;\n    this.channel.setVolume();\n  }\n\n  resize() {\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","export class Helpers {\n  static formatTime(time) {\n    let m = Math.floor((time/1000)/60);\n    let s = Math.floor(((time/1000)-m*60));\n\n    var fs = (s < 10) ? (\"0\" + s) : s\n    return  m + ':' + fs;\n  }\n\n  static formatTrack(track) {\n    var str = \"\";\n  }\n}\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class MediaLibrary {     \n  constructor() {\n    this.message = 'Hello world';\n  }\n}","import {bindable} from 'aurelia-framework';\n\nexport class Timer {     \n  @bindable track;\n  constructor() {\n    console.log(this.track);\n  }\n\n  formatTime() {\n    let m = Math.floor((this.track.length/1000)/60);\n    let s = Math.floor(((this.track.length/1000)-m*60));\n\n    var fs = (s < 10) ? (\"0\" + s) : s\n    return  m + ':' + fs;\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class IntToRGBValueConverter {\n  toView(int) {\n\n    console.log('we are converting!');\n\n    if (int > 100) int = 100;\n    if (int < 0) int = 0;\n\n    var r = Math.floor(255 - (int*2.55));\n    var g = Math.floor(0 + (int*2.55));\n\n    return 'rgb('+r+','+g+',0)';\n  }\n  \n  fromView(str) {\n    return 'Something';\n  }\n\n\n}\n","export class IntToStrValueConverter {\n  toView(str) {\n    return parseInt(str);\n  }\n\n  fromView(int) {\n    return String(int);\n  }\n}\n"],"sourceRoot":".."}